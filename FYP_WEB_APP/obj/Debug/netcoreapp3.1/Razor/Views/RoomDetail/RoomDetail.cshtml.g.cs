#pragma checksum "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1fd2a907e62db29bd46760af16dc584695837b66"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_RoomDetail_RoomDetail), @"mvc.1.0.view", @"/Views/RoomDetail/RoomDetail.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/_ViewImports.cshtml"
using FYP_APP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/_ViewImports.cshtml"
using FYP_APP.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
using FYP_WEB_APP.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
using FYP_WEB_APP.Models.LogicModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
using FYP_APP.Models.MongoModels;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1fd2a907e62db29bd46760af16dc584695837b66", @"/Views/RoomDetail/RoomDetail.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1103289fd338f5238efba9485e51b05468496a5f", @"/Views/_ViewImports.cshtml")]
    public class Views_RoomDetail_RoomDetail : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/javascript_Cookie/js.cookie.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/DragSensorDeviceButtonJSModel.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/Rooms/Rooms"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/img/icon/lighting32.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/img/icon/floor-plans512.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("height: auto;width:24px;"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("floorPlanSubmit"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_8 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("action", new global::Microsoft.AspNetCore.Html.HtmlString("~/RoomDetail/uploadFloorPlan"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_9 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/img/icon/temp.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_10 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("width", new global::Microsoft.AspNetCore.Html.HtmlString("24px"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_11 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/img/icon/ACBlack32.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_12 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/img/icon/save64.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.HeadTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper;
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.BodyTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\n");
#nullable restore
#line 5 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                     
    ViewData["Title"] = "Rooms Detail";
    Layout = "_Layout";

    string returnUrl = Context.Request.Path + Context.Request.QueryString;
    Context.Response.Cookies.Append("returnUrl", returnUrl);


    List<SensorsListModel> sensorsList = ViewData["sensorsList"] as List<SensorsListModel>;
    List<DevicesListModel> devicesLists = ViewData["devicesList"] as List<DevicesListModel>;
    MongoRoomModel roomModel = ViewData["roomModel"] as MongoRoomModel;

#line default
#line hidden
#nullable disable
            WriteLiteral("\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("head", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b669852", async() => {
                WriteLiteral("\n    <title>");
#nullable restore
#line 19 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
      Write(ViewData["Title"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</title>\n    <!--https://github.com/js-cookie/js-cookie-->\n    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b6610457", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\n    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b6611541", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\n\n    <script>\n\n            function savePosition() {\n                var JSSensorList = [];\n                var JSDeviceList = [];\n                //get all the sensor id from the C# list then back to js to get the element\n");
#nullable restore
#line 30 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                 foreach (SensorsListModel sensor in sensorsList) {

#line default
#line hidden
#nullable disable
                WriteLiteral("                    ");
                WriteLiteral("\n                    var position = $(\"#");
#nullable restore
#line 32 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                  Write(sensor.sensorId);

#line default
#line hidden
#nullable disable
                WriteLiteral("\").position();\n                    console.log(position);\n                    var jsSpModel = new DragSensorDeviceButtonJSModel(\'");
#nullable restore
#line 34 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                  Write(sensor.sensorId);

#line default
#line hidden
#nullable disable
                WriteLiteral("\', position.left, position.top);\n                    JSSensorList.push(jsSpModel);\n\n                    ");
#nullable restore
#line 37 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                           
                }

#line default
#line hidden
#nullable disable
                WriteLiteral("                //get all the device id from the C# list then back to js to get the element position\n");
#nullable restore
#line 40 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                 foreach (DevicesListModel device in devicesLists) {

#line default
#line hidden
#nullable disable
                WriteLiteral("                    ");
                WriteLiteral("\n                    var position = $(\"#");
#nullable restore
#line 42 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                  Write(device.devicesId);

#line default
#line hidden
#nullable disable
                WriteLiteral("\").position();\n                    console.log(position);\n                    var jsDpModel = new DragSensorDeviceButtonJSModel(\'");
#nullable restore
#line 44 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                  Write(device.devicesId);

#line default
#line hidden
#nullable disable
                WriteLiteral("\', position.left, position.top);\n                    JSDeviceList.push(jsDpModel);\n\n                    ");
#nullable restore
#line 47 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                           
                }

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
                var sPositionList = JSON.stringify(JSSensorList);
                var dPositionList = JSON.stringify(JSDeviceList);

                var formData = new FormData();
                formData.append(""sPositionList"", sPositionList);
                formData.append(""dPositionList"", dPositionList);
                formData.append(""roomID"", '");
#nullable restore
#line 56 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                      Write(ViewData["roomID"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("\');\n                //{ \'sPositionList\': sPositionList, \'dPositionList\': dPositionList, \'roomID\':");
#nullable restore
#line 57 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                                        Write(ViewData["roomID"]);

#line default
#line hidden
#nullable disable
                WriteLiteral(" }\n\n                $.ajax({\n                    url: \'");
#nullable restore
#line 60 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                     Write(Url.Action("UpdateSensorDevicePosition", "RoomDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"',
                    type: ""POST"",
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: formData,
                    success: function (response) {
                        alert(""Saved"");
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert('Cannot save, please try again!');
                        console.log(XMLHttpRequest);
                        console.log(textStatus);
                        console.log(errorThrown);

                    }
                });
            }

    </script>

");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.HeadTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n\n\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("body", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b6618990", async() => {
                WriteLiteral("\n\n\n    ");
#nullable restore
#line 87 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
Write(Html.Partial("_loader", "roomDetailLoader"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\n    <!--page title-->\n    <div class=\"container-fluid p-4 \">\n        <div class=\"col-12 d-flex\">\n            <div class=\"col-lg-4\">\n                <h1 class=\"display-4\"><strong>Room ");
#nullable restore
#line 92 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                              Write(ViewData["roomID"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</strong><span class=\"badge badge-pill badge-success\" style=\"font-size: 14px\">Online</span></h1>\n                <!-- tag -->\n                <div class=\"d-flex col-sm-12 ml-0 pl-0\">\n                    <a href=\"#\" class=\"badge badge-primary mx-0\">");
#nullable restore
#line 95 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                            Write(roomModel.type);

#line default
#line hidden
#nullable disable
                WriteLiteral("</a>\n                    <a href=\"#\" class=\"badge badge-warning mx-1\">");
#nullable restore
#line 96 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                            Write(roomModel.floor);

#line default
#line hidden
#nullable disable
                WriteLiteral(" / f</a>\n                </div>\n\n                <nav class=\"col-sm-12 my-2 \" aria-label=\"breadcrumb\" style=\"margin-left: -20px;\">\n                    <ol class=\"breadcrumb \">\n                        <li class=\"breadcrumb-item\">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b6621293", async() => {
                    WriteLiteral("Rooms List");
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"</li>
                        <li class=""breadcrumb-item active"" aria-current=""page"">Room detail</li>
                    </ol>
                </nav>
            </div>
            <div class=""col-lg-8 row row-cols-4"">
                <!-- totalPowerUsage -->
                <div class=""col bd-callout bd-callout-warning py-2 shadow-sm m-0 ml-sm-4 "" style=""max-width: 300px; min-width: 220px; max-height: 100px; overflow:hidden"">
                    <h4>
                        <b style=""font-size: .6em;"">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "1fd2a907e62db29bd46760af16dc584695837b6622936", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("Total Power Usage</b>\n                    </h4>\n                    <h3><strong class=\"pl-sm-2\">");
#nullable restore
#line 112 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                           Write(ViewData["totalPowerUsage"]);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</strong><snap class=""text-black"" style=""font-size: .6em;"">KW </snap></h3>
                </div>

                <!-- monthPowerUsage -->
                <div class=""col bd-callout bd-callout-danger py-2 shadow-sm m-0 ml-sm-4 "" style=""max-width: 300px; min-width: 220px; max-height: 100px;"">
                    <h4>
                        <b style=""font-size: .6em;"">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "1fd2a907e62db29bd46760af16dc584695837b6624810", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("Month Power Usage</b>\n                    </h4>\n");
#nullable restore
#line 120 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      
                        var monthName = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(DateTime.Now.Month);
                    

#line default
#line hidden
#nullable disable
                WriteLiteral("                    <h3><strong class=\"pl-sm-2\">");
#nullable restore
#line 123 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                           Write(ViewData["monthPowerUsage"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</strong><snap class=\"text-black\" style=\"font-size: .6em;\">KW <small style=\"font-size:6px\"><b>/");
#nullable restore
#line 123 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                                                                                                                      Write(monthName);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</b></small></snap></h3>
                </div>

                <!-- TodayPowerUsage -->
                <div class=""col bd-callout bd-callout-info py-2 shadow-sm m-0 ml-sm-4 "" style=""max-width: 300px; min-width: 220px; max-height: 100px;"">
                    <h4>
                        <b style=""font-size: .6em;"">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "1fd2a907e62db29bd46760af16dc584695837b6627582", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("Today Power Usage</b>\n                    </h4>\n                    <h3><strong class=\"pl-sm-2\">");
#nullable restore
#line 131 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                           Write(Math.Round(roomModel.power, 2, MidpointRounding.AwayFromZero));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</strong><snap class=""text-black"" style=""font-size: .6em;"">KW </snap></h3>
                </div>

                <div class=""col bd-callout bd-callout-info py-2 shadow-sm m-0 ml-sm-4 "" style=""max-width: 300px; min-width: 220px; max-height: 100px;"">
                    <h4>
                        <b style=""font-size: .6em;"">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "1fd2a907e62db29bd46760af16dc584695837b6629447", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("Daily Power Usage</b>\n                    </h4>\n");
#nullable restore
#line 138 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      
                        double avgDayUsage = (double)ViewData["monthPowerUsage"];
                    

#line default
#line hidden
#nullable disable
                WriteLiteral("                    <h3><small style=\"font-size:6px\">Average</small><strong class=\"pl-sm-2\">");
#nullable restore
#line 141 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                                       Write(Math.Round(avgDayUsage / 30, 2, MidpointRounding.AwayFromZero));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</strong><snap class=""text-black"" style=""font-size: .6em;"">KW </snap><small style=""font-size:8px"">of 30 days</small></h3>
                </div>


                <div class=""col bd-callout bd-callout-warning py-2 shadow-sm m-0 ml-sm-4 "" style=""max-width: 300px; min-width: 220px; max-height: 100px;"">
                    <h4>
                        <b style=""font-size: .6em;"">");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "1fd2a907e62db29bd46760af16dc584695837b6631826", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("AC Power Usage</b>\n                    </h4>\n                    <h3><strong class=\"pl-sm-2\">");
#nullable restore
#line 149 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                           Write(ViewData["thisMonthAcUsage"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</strong><snap class=\"text-black\" style=\"font-size: .6em;\">KW <small style=\"font-size:6px\">/");
#nullable restore
#line 149 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                                                                                                                    Write(monthName);

#line default
#line hidden
#nullable disable
                WriteLiteral("</small></snap></h3>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"d-flex col-sm-12 \">\r\n");
#nullable restore
#line 155 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
              
                double AT = 0; double HI = 0;
                ApparenTemperatureUtil atUtil = new ApparenTemperatureUtil();
                double temp = atUtil.getAvgTemp(roomModel.roomId);
                double hum = atUtil.getAvgHum(roomModel.roomId);
                HI = atUtil.calHeatIndex(temp, hum);
                AT = atUtil.calApparenTemperature(temp, hum, 0.5);
                var ATColStr = atUtil.getUIColor(AT);
                var HIColStr = atUtil.getUIColor(HI);
            

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n            <button type=\"button\"");
                BeginWriteAttribute("class", " class=\"", 8160, "\"", 8191, 4);
                WriteAttributeValue("", 8168, "btn", 8168, 3, true);
                WriteAttributeValue(" ", 8171, "mx-1", 8172, 5, true);
                WriteAttributeValue(" ", 8176, "h-50", 8177, 5, true);
#nullable restore
#line 166 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue(" ", 8181, HIColStr, 8182, 9, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" style=\"font-weight:bold\">\r\n                Avg Temp <span class=\"badge badge-light\" style=\"font-size:16px\">");
#nullable restore
#line 167 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                           Write(temp);

#line default
#line hidden
#nullable disable
                WriteLiteral(" °C</span>\r\n            </button>\r\n            <button type=\"button\"");
                BeginWriteAttribute("class", " class=\"", 8373, "\"", 8399, 3);
                WriteAttributeValue("", 8381, "btn", 8381, 3, true);
                WriteAttributeValue(" ", 8384, "mx-0", 8385, 5, true);
#nullable restore
#line 169 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue(" ", 8389, ATColStr, 8390, 9, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" style=\"font-weight:bold\">\r\n                Apparent Temperature <span class=\"badge badge-light\" style=\"font-size:16px\">");
#nullable restore
#line 170 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                                       Write(AT);

#line default
#line hidden
#nullable disable
                WriteLiteral(" °C</span>\r\n            </button>\r\n            <button type=\"button\"");
                BeginWriteAttribute("class", " class=\"", 8591, "\"", 8622, 4);
                WriteAttributeValue("", 8599, "btn", 8599, 3, true);
                WriteAttributeValue(" ", 8602, "mx-1", 8603, 5, true);
                WriteAttributeValue(" ", 8607, "h-50", 8608, 5, true);
#nullable restore
#line 172 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue(" ", 8612, HIColStr, 8613, 9, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" style=\"font-weight:bold\">\r\n                Heat Index <span class=\"badge badge-light\" style=\"font-size:16px\">");
#nullable restore
#line 173 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                             Write(HI);

#line default
#line hidden
#nullable disable
                WriteLiteral(@" °C</span>
            </button>

        </div>

        <div id=""sensorView""></div>
        <div id=""devicesView""></div>

        <div class=""d-flex bd-highlight flex-wrap flex-column"">
            <div id=""sensorChartTS"" class=""flex-fill bd-highlight col-12 h-100""></div>
            <div id=""sensorChartHS"" class=""flex-fill bd-highlight  col-12 h-100""></div>
            <div id=""sensorChartLS"" class=""flex-fill bd-highlight  col-12 h-100""></div>

            <div id=""DevicesChartAC"" class=""flex-fill bd-highlight col-12 h-100""></div>
            <div id=""DevicesChartLT"" class=""flex-fill bd-highlight col-12 h-100""></div>
            <div id=""DevicesChartHD"" class=""flex-fill bd-highlight col-12 h-100""></div>
            <div id=""DevicesChartEF"" class=""flex-fill bd-highlight col-12 h-100""></div>
            <script>
                    $("".roomDetailLoader"").css(""top"", ""300px"");
                    $("".roomDetailLoader"").css(""left"", ""45%"");
                    $("".roomDetailLoader"").show();

                 ");
                WriteLiteral(@"   //load sensor device list
                    updateSensorDeviceList();
                    $("".roomDetailLoader"").delay(5000).hide(1250);


                    //each 30s to referash the sensor status
                    var myVar = setInterval(function () {
                        $.when(updateSensorDeviceList()).then(dismissLoader());
                    }, 30000);

                    function updateSensorDeviceList() {

                        $("".sensorLoader"").show();
                        $("".deviceLoader"").show();

                        //sensors
                        $(""#devicesView"").load(""..");
#nullable restore
#line 211 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                             Write(Url.Action("SearchDevicesByRoomid", "Devices", new { roomID = ViewData["roomID"] }));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () { });\n                        $(\"#sensorView\").load(\"..");
#nullable restore
#line 212 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                            Write(Url.Action("SensorsListByRoomid", "Sensors", new { roomID = ViewData["roomID"] }));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#sensorChartTS\").load(\"..");
#nullable restore
#line 213 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                               Write(Html.Raw(Url.Action("chart", "chart", new { title = "Temperature Sensor Log Record", chartType = "line" ,position ="top" , download = false , time = 6 , timeSpacing = 10 , type = "TS" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#sensorChartHS\").load(\"..");
#nullable restore
#line 214 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                               Write(Html.Raw(Url.Action("chart", "chart", new { title = "Humidity Sensor Log Record", chartType = "line" ,position ="top" , download = false, time = 6 , timeSpacing = 10 , type = "HS" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#sensorChartLS\").load(\"..");
#nullable restore
#line 215 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                               Write(Html.Raw(Url.Action("chart", "chart", new { title = "Luminosity Sensor Log Record", chartType = "line" ,position ="top" , download = false, time = 6 , timeSpacing = 10 , type = "LS" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () { });\n\n                        //devices\n                        $(\"#DevicesChartAC\").load(\"..");
#nullable restore
#line 218 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                Write(Html.Raw(Url.Action("chart", "chart", new { title = "Air Conditioning Log Record", chartType = "line" ,position ="top" , download = false , time = 6 , timeSpacing = 10 , type = "AC" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#DevicesChartLT\").load(\"..");
#nullable restore
#line 219 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                Write(Html.Raw(Url.Action("chart", "chart", new { title = "Light Log Record", chartType = "line" ,position ="top" , download = false, time = 6 , timeSpacing = 10 , type = "LT" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#DevicesChartHD\").load(\"..");
#nullable restore
#line 220 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                Write(Html.Raw(Url.Action("chart", "chart", new { title = "Humidifier Log Record", chartType = "line" ,position ="top" , download = false, time = 6 , timeSpacing = 10 , type = "HD" })));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", function () {});\n                        $(\"#DevicesChartEF\").load(\"..");
#nullable restore
#line 221 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                Write(Html.Raw(Url.Action("chart", "chart", new { title = "FAN Log Record", chartType = "line" ,position ="top" , download = false, time = 6 , timeSpacing = 10 , type = "EF" })));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""", function () {});

                    }

                    function dismissLoader() {
                        //delay(2000)
                        $("".sensorLoader"").hide(3500);
                        $("".deviceLoader"").hide(3500);
                    }
            </script>
        </div>
        <!-- data end -->
        <!--  chart end   -->
        <!--   floor plan     -->

        <div class=""card d-flex flex-column mb-2 mx-2 p-2 "">

            <div class=""row justify-content-between mb-2"">
                <div class=""col"">
                    <h3 id=""floorPlan"">
                        <b>Room Floor Plan </b>
                    </h3>
                </div>
                <div class=""col-12 d-flex "">

                    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1fd2a907e62db29bd46760af16dc584695837b6645388", async() => {
                    WriteLiteral("\n                        <!--upload file-->\n                        <input type=\"hidden\" name=\"roomID\"");
                    BeginWriteAttribute("value", " value=\"", 13356, "\"", 13383, 1);
#nullable restore
#line 248 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue("", 13364, ViewData["roomID"], 13364, 19, false);

#line default
#line hidden
#nullable disable
                    EndWriteAttribute();
                    WriteLiteral(" />\n                        <input type=\"hidden\" id=\"floorPlanBase64\" name=\"floorPlanBase64\"");
                    BeginWriteAttribute("value", " value=\"", 13476, "\"", 13484, 0);
                    EndWriteAttribute();
                    WriteLiteral(@" />
                        <input style=""display:none"" type=""file"" id=""imgUpload1"" onchange=""encodeImageFileAsURL(this)"" />
                        <button title=""Upload floor plan"" class=""btn btn-outline-secondary px-0 mr-1 ml-2 "" type=""button"" style=""width: 40px; height: 40px"" onclick='$(""#imgUpload1"").click()'>");
                    __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "1fd2a907e62db29bd46760af16dc584695837b6646801", async() => {
                    }
                    );
                    __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                    __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                    __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
                    __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
                    await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                    if (!__tagHelperExecutionContext.Output.IsContentModified)
                    {
                        await __tagHelperExecutionContext.SetOutputContentAsync();
                    }
                    Write(__tagHelperExecutionContext.Output);
                    __tagHelperExecutionContext = __tagHelperScopeManager.End();
                    WriteLiteral("</button>\n\n                    ");
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
                __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_7.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_7);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_8);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"
                    <script>var imagebase64 = """";

                        function encodeImageFileAsURL(element) {
                            var file = element.files[0];
                            var reader = new FileReader();
                            reader.onloadend = function () {
                                imagebase64 = reader.result;
                                $(""#floorPlanBase64"").val(reader.result);
                                console.log('imagebase64', $(""#floorPlanBase64"").val());
                                $(""#floorPlanSubmit"").submit();
                            }
                            reader.readAsDataURL(file);



                        }</script>
                    <button title=""Add Sensor"" type=""button"" class=""btn btn-outline-secondary px-2"" style=""width: 40px; height: 40px;""");
                BeginWriteAttribute("onclick", " onclick=\'", 14753, "\'", 14797, 3);
                WriteAttributeValue("", 14763, "AddtSensors(\"", 14763, 13, true);
#nullable restore
#line 270 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue("", 14776, ViewData["roomID"], 14776, 19, false);

#line default
#line hidden
#nullable disable
                WriteAttributeValue("", 14795, "\")", 14795, 2, true);
                EndWriteAttribute();
                WriteLiteral(">\n                        ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "1fd2a907e62db29bd46760af16dc584695837b6651209", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_9);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\n                    </button>\n                    <button title=\"Add Device\" type=\"button\" class=\"btn btn-outline-secondary px-2\" style=\"width: 40px; height: 40px;\"");
                BeginWriteAttribute("onclick", " onclick=\'", 15033, "\'", 15077, 3);
                WriteAttributeValue("", 15043, "AddtDevices(\"", 15043, 13, true);
#nullable restore
#line 273 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue("", 15056, ViewData["roomID"], 15056, 19, false);

#line default
#line hidden
#nullable disable
                WriteAttributeValue("", 15075, "\")", 15075, 2, true);
                EndWriteAttribute();
                WriteLiteral(">\n                        ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "1fd2a907e62db29bd46760af16dc584695837b6653159", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_11);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\n                    </button>\n                    <button title=\"Save all positions\" id=\"positionSaveBtn\" type=\"button\" class=\"btn btn-outline-secondary px-2\" style=\"width: 40px; height: 40px;\" onclick=\"savePosition()\">\n                        ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "1fd2a907e62db29bd46760af16dc584695837b6654577", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_12);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\n                    </button>\n");
#nullable restore
#line 279 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      
                        //update img status
                        string msgDisply = "display: none;";
                        string msgStr = "";
                        string msgColor = "bg-success";
                        if (TempData["updateSuccess"] != null)
                        {
                            Boolean upstatus = TempData["updateSuccess"].Equals("true") ? true : false;
                            msgStr = upstatus ? "Floor plan updated" : "Floor plan upload fail";
                            msgDisply = "display: block;";
                            msgColor = upstatus ? "bg-success" : "bg-danger";
                        }
                    

#line default
#line hidden
#nullable disable
                WriteLiteral("\n                </div>\n            </div>\n            <!--upload status-->\n            <div");
                BeginWriteAttribute("class", " class=\"", 16270, "\"", 16293, 2);
                WriteAttributeValue("", 16278, "col-8", 16278, 5, true);
#nullable restore
#line 296 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue(" ", 16283, msgColor, 16284, 9, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                BeginWriteAttribute("style", " style=\"", 16294, "\"", 16409, 8);
                WriteAttributeValue("", 16302, "border-radius:", 16302, 14, true);
                WriteAttributeValue(" ", 16316, "5px;", 16317, 5, true);
                WriteAttributeValue(" ", 16321, "height:auto;", 16322, 13, true);
                WriteAttributeValue(" ", 16334, "width:180px;", 16335, 13, true);
                WriteAttributeValue(" ", 16347, "padding:5px;", 16348, 13, true);
                WriteAttributeValue(" ", 16360, "text-align:center;", 16361, 19, true);
                WriteAttributeValue(" ", 16379, "margin-bottom:5px;", 16380, 19, true);
#nullable restore
#line 296 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue(" ", 16398, msgDisply, 16399, 10, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(">\n                <p class=\"text-white\" style=\"margin:0\"><b>");
#nullable restore
#line 297 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                     Write(msgStr);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</b></p>
            </div>

            <div class=""row mb-2"">

                <!--floor plan-->
                <div class=""col col-lg-4 col-xl-6 col-md-12 ml-4 p-2"" style=""background-color: lightgrey;  max-width: 510px; max-height: 710px; min-width: 510px; min-height: 710px; overflow: hidden"">
");
#nullable restore
#line 304 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      

                        foreach (SensorsListModel sensorModel in sensorsList)
                        {
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 308 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                       Write(Html.Partial("_dragButtonSensor", sensorModel));

#line default
#line hidden
#nullable disable
#nullable restore
#line 308 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                           
                        }
                    

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n");
#nullable restore
#line 312 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      
                        foreach (DevicesListModel devicesModel in devicesLists)
                        {
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 315 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                       Write(Html.Partial("_dragButtonDevice", devicesModel));

#line default
#line hidden
#nullable disable
#nullable restore
#line 315 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                                                            
                        }
                    

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                    <div id=\"heatmapCol\"");
                BeginWriteAttribute("class", " class=\"", 17343, "\"", 17351, 0);
                EndWriteAttribute();
                WriteLiteral(@">
                        <div id=""wrapper"" class=""demo-wrapper"" style=""border-width:1px;"">
                            <div id=""heatmapControl"" class=""heatmap"" style=""position: relative;"">
                                <div id=""heatmap"" class=""heatmap"">

                                    <img id=""planImg""");
                BeginWriteAttribute("src", " src=\"", 17668, "\"", 17697, 1);
#nullable restore
#line 324 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue("", 17674, roomModel.floorPlanImg, 17674, 23, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(@" width=""500"" height=""700"" style=""background-color: black;"">

                                </div>
                                <canvas id=""BlueCanvas"" class=""heatmap-canvas"" style=""position: absolute; left: 0px; top: 0px;""></canvas>
                            </div>
                            <div class=""tooltips"" style=""display: none; transform: translate(39px, 352px);"">593</div>
                            <div id=""legendArea"" class=""legend-area"">
                                <h4>Legend Title</h4>
                                <span id=""min"">0</span>
                                <span id=""max"">40</span>
                                <img id=""gradient"" src=""data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAKCAYAAABCHPt+AAAAnklEQVRYR+2WQQqDQBAES5wB/f8/Y05RcMWwSu6JIT0Dm4WlH1DUdHew7/z6WYFhhnGRpnlhAEaQpi/ADbh/np0MiBhGhW+2ymFU+DZfg1EhaoB4jCFuMYYcQKZrXwPEVvm5Og0pcYakBvI35G1jNIZ4jCHexxjSpz9ZFUjAynLbpOvqteaODkm9sloz5JF+ZTVmSAWSu9Qb65AvgDwBQoLgVDlWfAQAAAAASUVORK5CYII="" style=""width:100%""");
                WriteLiteral(@">
                            </div>
                        </div>
                    </div>
                    <script>//this return value has ""px""
                        //var moveX = document.getElementById(""wrapper"").style.borderWidth;
                        //var moveY = 100;

                        var heatmapCol = document.getElementById('heatmapCol').offsetWidth;
                        var floorPlanImgW = document.getElementById('planImg').offsetWidth;
                        var floorPlanImgH = document.getElementById('planImg').offsetHeight;
                        var wrapper = document.getElementById(""wrapper"");
                        var heatmapControl = document.getElementById(""heatmapControl"");
                        var heatmap = document.getElementById(""heatmap"");
                        var BlueCanvas = document.getElementById(""BlueCanvas"");
                        var legendArea = document.getElementById(""legendArea"");

                        //floorPlanImgW += mo");
                WriteLiteral(@"veX;
                        //floorPlanImgH += (moveY - parseInt(moveX));


                        wrapper.style.width = floorPlanImgW + ""px"";
                        wrapper.style.height = floorPlanImgH + ""px"";
                        //var x = moveY - parseInt(moveX) * 3;
                        //legendArea.style.marginBottom=""-""+x+""px"";

                        //floorPlanImgW -= moveX;
                        BlueCanvas.style.width = floorPlanImgW + ""px"";
                        BlueCanvas.style.height = floorPlanImgH + ""px"";

                        //floorPlanImgH -= (moveY - parseInt(moveX));
                        heatmapControl.style.width = floorPlanImgW + ""px"";
                        heatmapControl.style.height = floorPlanImgH + ""px"";
                        heatmap.style.width = floorPlanImgW + ""px"";
                        heatmap.style.height = floorPlanImgH + ""px"";
                        heatmapCol.style.width = floorPlanImgW + ""px"";
                        heatmapCol.s");
                WriteLiteral("tyle.height = floorPlanImgH + \"px\";</script>\r\n                </div>\r\n\r\n                <!--     Detail     -->\r\n                <div class=\"col-lg-6 col-xl-6 offset-xl-0 ml-4  py-0\" style=\" max-width: 700px\">\r\n                    ");
#nullable restore
#line 375 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
               Write(Html.Partial("_SensorDeviceDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"

                    <div class=""col-lg-6 col-xl-6 offset-xl-0 ml-0 p-0 d-flex justify-content-between"" style="" max-width: 620px"" >
                        <div class=""card text-white bg-secondary mb-3"" style=""max-width: 300px;"">
                            <div class=""card-header"" style=""padding-bottom:0"">
                                <p><b>Room infrared thermal imaging</b></p>
                            </div>
                            <img id=""IRCAMimg"" src=""http://47.56.85.130:18888/simg?n=f348"" />
                        </div>

");
#nullable restore
#line 385 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                          
                            PiCamUtil piCamUtil = new PiCamUtil();
                            var piCamBase64_img = "";
                            var camlist = devicesLists.Where(ls => ls.devicesId.Contains("CA")).ToList();
                            foreach (var cam in camlist) {
                                piCamBase64_img = piCamUtil.getCamBase64_img(cam.devicesId);
                            }
                        

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
                        <div class=""card text-white bg-secondary mb-3"" style=""max-width: 300px; min-width: 300px"">
                            <div class=""card-header"" style=""padding-bottom:0"">
                                <p><b>PI CAM</b></p>
                            </div>
                            <img id=""PICAMimg""");
                BeginWriteAttribute("src", " src=\"", 22394, "\"", 22427, 1);
#nullable restore
#line 398 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
WriteAttributeValue("", 22400, piCamBase64_img.ToString(), 22400, 27, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(@" />
                        </div>



                        <script>//each 1s to referash the IRCam sensor status
                            
                            var myVar = setInterval(function () {
                                $(""#IRCAMimg"").attr(""src"", ""http://47.56.85.130:18888/simg?n=f348"" + ""&x="" + new Date().getTime());
                                console.log(""IRCAMimg "");
                            }, 1000);

                        </script>
                    </div>
                </div>
 
            </div>
    </div>
    <!--heatmap js-->
    <script>
            window.onload = function () {

                function generateRandomData(len) {
                    var floorPlanImgW = document.getElementById('planImg').offsetWidth;
                    var floorPlanImgH = document.getElementById('planImg').offsetHeight;


                    // generate some random data
                    var points = [];
                    var max = 0;
                    var m");
                WriteLiteral("in = 0;\n                    var width = floorPlanImgW;\n                    var height = floorPlanImgH;\n\n");
#nullable restore
#line 432 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                      
                        string str = "[";
                        int count = 0;

                        int sensorsListCount = sensorsList.Count();
                        var sensorsListwhere = sensorsList.Where(s => s.sensorId.Contains("TS")).ToList();
                        foreach (var get in sensorsListwhere) {
                            int x = 0;
                            int y = 0;
                            int addxy = 10;
                            var setx = Convert.ToInt32(get.pos_x)-10;
                            var sety = Convert.ToInt32(get.pos_y)-20;
                            while (x < 6)
                            {
                                setx += 20;

                                while (y < 5)
                                {
                                    sety += 20;

                                    if (count == 0 && x == 0 && y == 0)
                                    {
                                        str += "[" + 50 + "," + sety + "," + Convert.ToInt32(get.current_Value) + "]";
                                    }
                                    else
                                    {
                                        str += ",[" + setx + "," + sety + "," + Convert.ToInt32(get.current_Value) + "]";

                                    }
                                    y++;
                                }
                                x++;

                            }
                            count += 1;

                        }
                        str += "]";
                        

#line default
#line hidden
#nullable disable
                WriteLiteral("                        obj = JSON.parse(\'");
#nullable restore
#line 471 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                                     Write(Html.Raw(str));

#line default
#line hidden
#nullable disable
                WriteLiteral("\');\n\n                        var TData = ");
#nullable restore
#line 473 "/Users/shingwaichan/Desktop/INB/Intelligent-Energy-Management-System-for-Buildings-INB/FYP_WEB_APP/Views/RoomDetail/RoomDetail.cshtml"
                               Write(Html.Raw(str));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";

                        for (let i = 0; i < TData.length; i++) {
                        var val = TData[i][2];

                       // max = Math.max(max, val);
                       // min = Math.min(min, val);
                        var x = TData[i][0];
                        var y = TData[i][1];
                        var point = {
                            x: x,
                            y: y,
                            value: val
                        };
                        points.push(point);
                    }


                    var data = { max: 40, min: 0, data: points };

                    return data;
                };


      /*  legend code */
      // we want to display the gradient, so we have to draw it
      var legendCanvas = document.createElement('canvas');
      legendCanvas.width = 100;
      legendCanvas.height = 10;
      var min = document.querySelector('#min');
      var max = document.querySelector('#max');
      var gradientImg = document.querySelecto");
                WriteLiteral(@"r('#gradient');

      var legendCtx = legendCanvas.getContext('2d');
      var gradientCfg = {};

      function updateLegend(data) {
                // the onExtremaChange callback gives us min, max, and the gradientConfig
                // so we can update the legend
                min.innerHTML = data.min;
        max.innerHTML = data.max;
        // regenerate gradient image
        if (data.gradient != gradientCfg) {
                gradientCfg = data.gradient;
          var gradient = legendCtx.createLinearGradient(0, 0, 100, 1);
          for (var key in gradientCfg) {
                gradient.addColorStop(key, gradientCfg[key]);
          }

          legendCtx.fillStyle = gradient;
          legendCtx.fillRect(0, 0, 100, 10);
          gradientImg.src = legendCanvas.toDataURL();
        }
      };
      /* legend code end */

      var heatmapInstance = h337.create({
                container: document.querySelector('.heatmap'),
        onExtremaChange: function (data) {
                updateLege");
                WriteLiteral(@"nd(data);
        }
      });

      // generate 200 random datapoints
      var data = generateRandomData(200);
      heatmapInstance.setData(data);

      var demoWrapper = document.querySelector('.demo-wrapper');
      var tooltip = document.querySelector('.tooltips');

      function updateTooltip(x, y, value) {
        // + 15 for distance to cursor
        var transform = 'translate(' + (x + 15) + 'px, ' + (y + 15) + 'px)';
        tooltip.style.MozTransform = transform; /* Firefox */
        tooltip.style.msTransform = transform; /* IE (9+) - note ms is lowercase */
        tooltip.style.OTransform = transform; /* Opera */
        tooltip.style.WebkitTransform = transform; /* Safari and Chrome */
        tooltip.style.transform = transform; /* One day, my pretty */
        tooltip.innerHTML = ""x:"" + x + "",y:"" + y + "",value:"" + value;
      }

      demoWrapper.onmousemove = function (ev) {
        var x = ev.layerX;
        var y = ev.layerY;
        var value = heatmapInstance.getValueAt({
           ");
                WriteLiteral(@"     x: x,
          y: y
        });

        tooltip.style.display = 'block';

        updateTooltip(x, y, value);
      };
      demoWrapper.onmouseout = function () {
                tooltip.style.display = 'none';
      };


      document.querySelector('.trigger-refresh').onclick = function () {
                heatmapInstance.setData(generateRandomData(200));
      };

      document.querySelector('.thankyou').onclick = function () {
                ga('send', 'event', 'social', 'thanks');
        document.querySelector('.thankyou').style.display = 'none';
        document.querySelector('#share').style.display = 'block';
      };
      var btns = document.querySelectorAll('.symbol');
      for (var i = 0; i < btns.length;) {
                btns[i].onclick = function () {
                    ga('send', 'event', 'social', 'share');
                };
      }

};
    </script>
    <!--heatmap js-->

");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.BodyTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
